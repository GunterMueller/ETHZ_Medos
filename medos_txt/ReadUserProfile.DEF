DEFINITION MODULE ReadUserProfile; (* Werner Winiger 12.1.83 
                  ===============

  Short version of module UserProfile supporting reading of the
  user profile only. Usable on write protected disks also.
  All procedures (if not ommitted) have the same semantic.

  Syntax of DK.User.Profile:
    UserProfile = Group { Group }.
    Group = '"' GroupId '"' { Item }.
    Item = "'" ItemId "'" Value "EOL".  *)

  EXPORT QUALIFIED
    LookupUserProfile, CloseUserProfile, SetReadPos, ReadItem;


  PROCEDURE LookupUserProfile (new: BOOLEAN; VAR done: BOOLEAN); (*
    FileSystem.Lookup(userProfile,"DK.User.Profile",new); 
    done := userProfile.res = done; 
    new = TRUE not supported in the read only version !!!        *)

  PROCEDURE CloseUserProfile; (*
    closes the user profile   *)

  PROCEDURE SetReadPos (groupId, itemId: ARRAY OF CHAR; VAR done: BOOLEAN); (*
    searches the specified group through all the user profile;
    returns FALSE if there is no such group at all;
    otherwise subsequent calls of ReadItem will give the items of this
    group;
    if the item id isn't empty, the specified item is searched within the
    group; returns FALSE if there is no such item; otherwise a subsequent
    call of ReadItem will give the value of this item *)

  PROCEDURE ReadItem (VAR itemId, value: ARRAY OF CHAR; VAR eog: BOOLEAN); (*
    reads the next item from the current group or returns eog=TRUE,
    if there is no further item in the group; *)

END ReadUserProfile.
